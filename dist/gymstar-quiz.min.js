!function(){"use strict";class n extends HTMLElement{constructor(){super(),this.config={primaryColor:"#ee0928",fontFamily:"'Poppins', sans-serif",desktopText:"Správny tréner mení všetko — VYBER SI HO HNEĎ",mobileText:"VYBER SI TRÉNERA",mobileTextAlt:"Správny tréner\nmení všetko",webhookUrl:"https://n8n.srv840889.hstgr.cloud/webhook/gymstar-quiz"},this.state={currentStep:1,totalQuestions:6,userGender:"male",answers:{gender:"",goal:"",experience:"",frequency:"",motivation:"",readiness:""},buttonPulsed:!1}}connectedCallback(){if(this.injectTriggerStyles(),!document.getElementById("gq-google-fonts")){const n=document.createElement("link");n.id="gq-google-fonts",n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800;900&display=swap",document.head.appendChild(n)}this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>:host {\r\n    --gym-red: #f00827;\r\n    --gym-teal: #1e4647;\r\n    --gym-white: #ffffff;\r\n    --gym-bead-inactive: rgba(255, 255, 255, 0.3);\r\n    --gym-fire: #ff4d00;\r\n}\r\n\r\n/* Modal Overlay */\r\n.gq-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.7);\r\n    display: none;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 10000;\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease;\r\n}\r\n\r\n.gq-overlay.active {\r\n    display: flex;\r\n    opacity: 1;\r\n}\r\n\r\n/* Modal Pane */\r\n.gq-modal {\r\n    background-color: var(--gym-teal);\r\n    width: 90%;\r\n    max-width: 500px;\r\n    border-radius: 20px;\r\n    padding: 30px;\r\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\r\n    position: relative;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 620px;\r\n    transition: min-height 0.3s ease;\r\n    font-family: \'Poppins\', sans-serif;\r\n    box-sizing: border-box;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n    .gq-modal {\r\n        width: calc(100% - 24px);\r\n        max-height: 95vh !important;\r\n        overflow-y: auto;\r\n        margin: 0 12px !important;\r\n        padding: 20px 15px;\r\n        border: 1px solid rgba(255,255,255,0.15);\r\n        min-height: auto;\r\n    }\r\n    \r\n    .gq-content {\r\n        min-height: 400px;\r\n    }\r\n}\r\n\r\n.gq-header {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-bottom: 20px;\r\n    position: relative;\r\n    z-index: 10;\r\n}\r\n\r\n.gq-nav-row {\r\n    display: grid;\r\n    grid-template-columns: 40px 1fr 40px; \r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.gq-back-btn {\r\n    background: none;\r\n    border: none;\r\n    color: rgba(255, 255, 255, 0.6);\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: color 0.2s, opacity 0.2s;\r\n    opacity: 0; \r\n    pointer-events: none;\r\n}\r\n.gq-back-btn.visible {\r\n    opacity: 1;\r\n    pointer-events: all;\r\n}\r\n.gq-back-btn:hover { color: var(--gym-white); }\r\n\r\n.gq-close-btn {\r\n    background: none;\r\n    border: none;\r\n    color: rgba(255, 255, 255, 0.6);\r\n    font-size: 28px;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    line-height: 1;\r\n}\r\n.gq-close-btn:hover { color: var(--gym-white); }\r\n\r\n/* 3-Line Header Styles */\r\n.gq-header-content {\r\n    text-align: center;\r\n    width: 100%;\r\n    transition: opacity 0.3s;\r\n}\r\n\r\n.gq-title-main {\r\n    color: var(--gym-red);\r\n    font-weight: 800;\r\n    font-size: 24px;\r\n    text-transform: uppercase;\r\n    margin: 0;\r\n    line-height: 1.1;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n    .gq-title-main {\r\n        text-align: center !important;\r\n        margin: 0 auto !important;\r\n    }\r\n    .gq-title-sub-red {\r\n        text-align: center !important;\r\n        margin: 0 auto !important;\r\n    }\r\n    .gq-subtitle-white {\r\n        text-align: center !important;\r\n        margin: 0 auto !important;\r\n    }\r\n}\r\n\r\n.gq-title-sub-red {\r\n    color: var(--gym-red);\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    margin: 0;\r\n    line-height: 1.2;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.gq-subtitle-white {\r\n    color: white;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    margin: 0;\r\n    line-height: 1.3;\r\n}\r\n\r\n.gq-highlight-underline {\r\n    position: relative;\r\n    display: inline-block;\r\n    font-weight: 800;\r\n    text-transform: uppercase;\r\n    color: white;\r\n}\r\n.gq-highlight-underline::after {\r\n    content: "";\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: -2px;\r\n    width: 0%;\r\n    height: 3px;\r\n    background: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 10\' preserveAspectRatio=\'none\'%3E%3Cpath d=\'M0 5 Q 50 10 100 5\' stroke=\'%23f00827\' stroke-width=\'3\' fill=\'none\' /%3E%3C/svg%3E") no-repeat center bottom;\r\n    background-size: 100% 100%;\r\n    animation: drawLine 1s cubic-bezier(0.25, 1, 0.5, 1) forwards;\r\n    animation-delay: 1.5s;\r\n}\r\n\r\n@keyframes drawLine {\r\n    to { width: 100%; }\r\n}\r\n\r\n.gq-content {\r\n    flex-grow: 1;\r\n    position: relative;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.gq-slide {\r\n    position: absolute;\r\n    top: 0; left: 0; width: 100%; height: 100%;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    transform: translateX(50px);\r\n    transition: opacity 0.4s cubic-bezier(0.25, 1, 0.5, 1), \r\n                transform 0.4s cubic-bezier(0.25, 1, 0.5, 1),\r\n                visibility 0s 0.4s; \r\n    pointer-events: none;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    padding-top: 5px;\r\n}\r\n\r\n.gq-slide.active {\r\n    opacity: 1;\r\n    visibility: visible;\r\n    transform: translateX(0);\r\n    pointer-events: all;\r\n    z-index: 2;\r\n    transition: opacity 0.4s cubic-bezier(0.25, 1, 0.5, 1), \r\n                transform 0.4s cubic-bezier(0.25, 1, 0.5, 1),\r\n                visibility 0s 0s; \r\n}\r\n\r\n.gq-slide.exit-left { opacity: 0; transform: translateX(-50px); }\r\n.gq-slide.exit-right { opacity: 0; transform: translateX(50px); }\r\n.gq-slide.enter-left { opacity: 0; transform: translateX(-50px); }\r\n\r\n.gq-question {\r\n    color: #ffffff;\r\n    color: var(--gym-white, #ffffff);\r\n    font-size: 19px; \r\n    font-weight: 600;\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n    line-height: 1.4;\r\n}\r\n\r\n.gq-options { display: flex; flex-direction: column; gap: 10px; width: 100%;}\r\n\r\n.gq-option {\r\n    background-color: rgba(255, 255, 255, 0.1);\r\n    border: 2px solid rgba(255, 255, 255, 0.2);\r\n    border-radius: 12px;\r\n    color: #ffffff;\r\n    color: var(--gym-white, #ffffff);\r\n    padding: 14px 20px;\r\n    font-size: 16px;\r\n    font-weight: 400;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n    text-align: left;\r\n    font-family: \'Poppins\', sans-serif;\r\n}\r\n.gq-option:hover {\r\n    background-color: rgba(255, 255, 255, 0.2);\r\n    border-color: var(--gym-white);\r\n    transform: translateY(-2px);\r\n}\r\n.gq-option:active { transform: scale(0.98); background-color: var(--gym-red); border-color: var(--gym-red);}\r\n\r\n/* Progress Bar - FIXED ALIGNMENT */\r\n.gq-progress-container {\r\n    margin-top: auto;\r\n    margin-bottom: 0px;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 30px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding-bottom: 5px;\r\n}\r\n.gq-progress-inner {\r\n    position: relative;\r\n    width: 80%;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n.gq-progress-line-bg {\r\n    position: absolute; \r\n    left: 6px;\r\n    right: 6px;\r\n    top: 50%; \r\n    height: 2px;\r\n    background-color: var(--gym-bead-inactive); \r\n    z-index: 0; \r\n    transform: translateY(-50%);\r\n}\r\n.gq-progress-line-fill {\r\n    position: absolute; \r\n    left: 6px;\r\n    top: 50%; \r\n    height: 2px;\r\n    background-color: var(--gym-red); \r\n    z-index: 1; \r\n    width: 0%;\r\n    transform: translateY(-50%); \r\n    transition: width 0.4s ease;\r\n}\r\n\r\n.gq-bead {\r\n    width: 12px; height: 12px; border-radius: 50%;\r\n    background-color: var(--gym-white); z-index: 2;\r\n    transition: all 0.4s ease;\r\n    border: 2px solid var(--gym-teal);\r\n    box-sizing: content-box; background-clip: padding-box;\r\n    position: relative;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.gq-bead.active {\r\n    transform: scale(1.5);\r\n    background-color: var(--gym-white);\r\n    border-color: rgba(255,255,255,0.5);\r\n    box-shadow: 0 0 15px rgba(255, 255, 255, 0.8), \r\n                0 0 5px rgba(240, 8, 39, 0.6); \r\n}\r\n\r\n.gq-bead.active::after {\r\n    content: \'\';\r\n    position: absolute;\r\n    top: -4px; left: 50%; transform: translateX(-50%);\r\n    width: 8px; height: 12px;\r\n    background: linear-gradient(0deg, #ff9d00, #ff0000 80%, rgba(0,0,0,0));\r\n    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;\r\n    filter: blur(1px);\r\n    opacity: 1;\r\n    animation: flameFlicker 0.2s infinite alternate;\r\n}\r\n\r\n@keyframes flameFlicker {\r\n    0% { transform: translateX(-50%) scale(1); opacity: 0.9; }\r\n    100% { transform: translateX(-50%) scale(1.2, 1.1); opacity: 1; }\r\n}\r\n\r\n.gq-bead.completed {\r\n    background-color: var(--gym-red);\r\n    border-color: var(--gym-red);\r\n    transform: scale(1); \r\n    box-shadow: none;\r\n}\r\n.gq-bead.completed::after { display: none; }\r\n\r\n.gq-checkmark-wrapper { width: 80px; height: 80px; margin: 0 auto 20px; position: relative; }\r\n.gq-checkmark-circle { width: 80px; height: 80px; border-radius: 50%; border: 3px solid rgba(255,255,255,0.2); position: absolute; top:0; left:0; }\r\n.gq-spinner-circle {\r\n    width: 80px; height: 80px; border-radius: 50%; border: 3px solid transparent; border-top-color: var(--gym-red);\r\n    position: absolute; top:0; left:0; animation: spin 1s linear infinite;\r\n}\r\n.gq-checkmark {\r\n    width: 40px; height: 20px; border-left: 5px solid var(--gym-red); border-bottom: 5px solid var(--gym-red);\r\n    position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg) scale(0); opacity: 0;\r\n}\r\n.gq-checkmark.show { animation: checkPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }\r\n\r\n.gq-loading-slide { \r\n    text-align: center; color: white; display: flex; flex-direction: column; \r\n    justify-content: center; height: 100%; \r\n}\r\n.gq-loading-text { font-size: 18px; font-weight: 600; opacity: 1; margin-top: 20px; }\r\n\r\n@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\r\n@keyframes checkPop { \r\n    0% { transform: translate(-50%, -50%) rotate(-45deg) scale(0); opacity: 0; }\r\n    100% { transform: translate(-50%, -50%) rotate(-45deg) scale(1); opacity: 1; }\r\n}\r\n\r\n.gq-result-card, .gq-form-card { text-align: center; padding-top: 20px; }\r\n.gq-match-text { color: var(--gym-white); font-size: 15px; margin-bottom: 5px; opacity: 0.8; }\r\n.gq-match-name { color: var(--gym-red); font-size: 28px; font-weight: 800; margin-bottom: 8px; line-height: 1.1; }\r\n.gq-desc { color: white; font-size: 13px; margin-bottom: 20px; line-height: 1.5; opacity: 0.9; }\r\n\r\n.gq-btn-cta {\r\n    background-color: var(--gym-red); color: white; border: none; padding: 15px 30px;\r\n    font-size: 18px; font-weight: 700; border-radius: 50px; cursor: pointer;\r\n    box-shadow: 0 4px 15px rgba(240, 8, 39, 0.4); transition: transform 0.2s;\r\n    text-transform: uppercase; width: 100%; font-family: \'Poppins\', sans-serif; margin-top: 5px;\r\n}\r\n.gq-btn-cta:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(240, 8, 39, 0.6); }\r\n.gq-btn-cta:disabled {\r\n    background-color: rgba(255, 255, 255, 0.3);\r\n    cursor: not-allowed;\r\n    box-shadow: none;\r\n}\r\n\r\n@keyframes buttonPulse {\r\n    0% { transform: scale(1); box-shadow: 0 4px 15px rgba(240, 8, 39, 0.4); }\r\n    50% { transform: scale(1.05); box-shadow: 0 4px 25px rgba(240, 8, 39, 0.8); }\r\n    100% { transform: scale(1); box-shadow: 0 4px 15px rgba(240, 8, 39, 0.4); }\r\n}\r\n.gq-btn-cta.entice {\r\n    animation: buttonPulse 0.8s ease-out forwards;\r\n}\r\n\r\n.gq-input-group { margin-bottom: 12px; text-align: left; }\r\n.gq-input {\r\n    width: 100%; background-color: rgba(255, 255, 255, 0.1);\r\n    border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 12px;\r\n    padding: 12px 15px; color: white; font-family: \'Poppins\', sans-serif;\r\n    font-size: 15px; box-sizing: border-box; transition: border-color 0.2s;\r\n}\r\n.gq-input::placeholder { color: rgba(255, 255, 255, 0.5); font-size: 13px; }\r\n.gq-input:focus { outline: none; border-color: var(--gym-white); background-color: rgba(255, 255, 255, 0.15); }\r\ntextarea.gq-input { resize: none; height: 100px; }\r\n.gq-label { color: white; font-size: 11px; margin-bottom: 5px; display: block; margin-left: 5px; opacity: 0.8; font-weight: 600; }\r\n\r\n/* Trigger Buttons (from loader.js) */\r\n.gq-trigger-desktop {\r\n    position: fixed;\r\n    bottom: 30px;\r\n    right: 30px;\r\n    background-color: var(--gym-red);\r\n    color: white;\r\n    border: none;\r\n    padding: 18px 28px;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n    border-radius: 50px;\r\n    cursor: pointer;\r\n    box-shadow: 0 4px 20px rgba(240, 8, 39, 0.6);\r\n    z-index: 9999;\r\n    font-family: \'Poppins\', sans-serif;\r\n    text-transform: uppercase;\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.gq-trigger-desktop:hover {\r\n    transform: translateY(-3px);\r\n    box-shadow: 0 6px 30px rgba(240, 8, 39, 0.8);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .gq-trigger-desktop {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.gq-trigger-mobile-btn {\r\n    background: none;\r\n    border: none;\r\n    color: white;\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    font-family: \'Poppins\', sans-serif;\r\n    padding: 10px 15px;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.gq-trigger-mobile-btn:hover {\r\n    color: var(--gym-red);\r\n}\r\n</style>\n            <div class="gq-overlay" id="gq-overlay">\r\n    <div class="gq-modal">\r\n        <div class="gq-header">\r\n            <div class="gq-nav-row">\r\n                <button class="gq-back-btn" id="gqBackBtn">←</button>\r\n                <div style="flex-grow:1"></div>\r\n                <button class="gq-close-btn" id="gqCloseBtn">×</button>\r\n            </div>\r\n            \r\n            \x3c!-- PERSISTENT HEADER CONTENT --\x3e\r\n            <div class="gq-header-content" id="gqMainHeader">\r\n                <h1 class="gq-title-main">ZISTI SVOJHO TRÉNERA</h1>\r\n                <h2 class="gq-title-sub-red">za 1 minútu</h2>\r\n                <h3 class="gq-subtitle-white">a dostaneš prvý deň tréningu <span class="gq-highlight-underline">ZADARMO</span></h3>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="gq-content" id="gqSlides">\r\n            \r\n            \x3c!-- Step 1: Ja som --\x3e\r\n            <div class="gq-slide active" data-step="1">\r\n                <div class="gq-question">Ja som:</div>\r\n                <div class="gq-options">\r\n                    <button class="gq-option" data-action="gender" data-value="male">Muž</button>\r\n                    <button class="gq-option" data-action="gender" data-value="female">Žena</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Step 2: Goals --\x3e\r\n            <div class="gq-slide" data-step="2">\r\n                <div class="gq-question">Čo je tvojím hlavným cieľom?</div>\r\n                <div class="gq-options" id="gqGoalsOptions">\r\n                    <button class="gq-option" data-action="goal" data-value="Schudnúť a spevniť postavu">Schudnúť a spevniť postavu</button>\r\n                    <button class="gq-option" data-action="goal" data-value="Nabrať svalovú hmotu">Nabrať svalovú hmotu</button>\r\n                    <button class="gq-option" data-action="goal" data-value="Zlepšiť kondíciu">Zlepšiť kondíciu</button>\r\n                    <button class="gq-option" data-action="goal" data-value="Odstrániť bolesti chrbta">Odstrániť bolesti chrbta</button>\r\n                    <button class="gq-option gq-cellulitis-option" style="display: none;" data-action="goal" data-value="Odstrániť celulitídu">Odstrániť celulitídu</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Step 3 --\x3e\r\n            <div class="gq-slide" data-step="3">\r\n                <div class="gq-question">Ako si na tom s cvičením?</div>\r\n                <div class="gq-options">\r\n                    <button class="gq-option" data-action="experience" data-value="Som úplný začiatočník">Som úplný začiatočník</button>\r\n                    <button class="gq-option" data-action="experience" data-value="Cvičím občas">Cvičím občas</button>\r\n                    <button class="gq-option" data-action="experience" data-value="Pravidelne športujem">Pravidelne športujem</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Step 4 --\x3e\r\n            <div class="gq-slide" data-step="4">\r\n                <div class="gq-question">Koľkokrát v týždni si ochotný prísť na tréning?</div>\r\n                <div class="gq-options">\r\n                    <button class="gq-option" data-action="frequency" data-value="Iba raz">Iba raz</button>\r\n                    <button class="gq-option" data-action="frequency" data-value="2-3x týždenne">2-3x týždenne</button>\r\n                    <button class="gq-option" data-action="frequency" data-value="4x alebo viac">4x alebo viac</button>\r\n                    <button class="gq-option" data-action="frequency" data-value="Nie som si zatiaľ istý">Nie som si zatiaľ istý</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Step 5 --\x3e\r\n            <div class="gq-slide" data-step="5">\r\n                <div class="gq-question">Čo ťa najviac motivuje?</div>\r\n                <div class="gq-options">\r\n                    <button class="gq-option" data-action="motivation" data-value="Rýchle a viditeľné výsledky">Rýchle a viditeľné výsledky</button>\r\n                    <button class="gq-option" data-action="motivation" data-value="Dlhodobé zdravie">Dlhodobé zdravie</button>\r\n                    <button class="gq-option" data-action="motivation" data-value="Zábava a odreagovanie">Zábava a odreagovanie</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Step 6 --\x3e\r\n            <div class="gq-slide" data-step="6">\r\n                <div class="gq-question">Posledná otázka: <span id="gqDynamicReadyText">Si pripravený</span> na zmenu?</div>\r\n                <div class="gq-options">\r\n                    <button class="gq-option" data-action="readiness" data-value="Áno, idem do toho naplno!">Áno, idem do toho naplno!</button>\r\n                    <button class="gq-option" data-action="readiness" data-value="Chcem to skúsiť">Chcem to skúsiť</button>\r\n                    <button class="gq-option" data-action="readiness" data-value="Potrebujem vedenie">Potrebujem vedenie</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Loading --\x3e\r\n            <div class="gq-slide" id="gqLoadingSlide">\r\n                 <div class="gq-loading-slide">\r\n                     <div class="gq-checkmark-wrapper">\r\n                         <div class="gq-checkmark-circle"></div>\r\n                         <div class="gq-spinner-circle" id="gqSpinner"></div>\r\n                         <div class="gq-checkmark" id="gqCheckmark"></div>\r\n                     </div>\r\n                     <div class="gq-loading-text" id="gqLoadText">Vyberáme ideálneho trénera...</div>\r\n                 </div>\r\n            </div>\r\n\r\n            \x3c!-- Result (Step 7) --\x3e\r\n            <div class="gq-slide" data-step="7">\r\n                <div class="gq-result-card">\r\n                    <div class="gq-match-text">Tvoj ideálny tréner je:</div>\r\n                    <div class="gq-match-name">Andrea Kavuličová</div>\r\n                    <p class="gq-desc">\r\n                        Špecialistka na efektívne tréningy, formovanie postavy, lymfodrenáže a EMS.\r\n                    </p>\r\n                    <button class="gq-btn-cta" id="gqShowFormBtn">Zistiť dostupnosť</button>\r\n                </div>\r\n            </div>\r\n\r\n            \x3c!-- Form (Step 8) --\x3e\r\n            <div class="gq-slide" data-step="8">\r\n                <div class="gq-form-card">\r\n                    <div class="gq-match-name" style="margin-bottom: 20px;">Andrea Kavuličová</div>\r\n                    \r\n                    <div class="gq-input-group">\r\n                        <label class="gq-label">TELEFÓNNE ČÍSLO</label>\r\n                        <input type="tel" class="gq-input" id="gqPhoneInput" placeholder="+421 9XX XXX XXX">\r\n                    </div>\r\n\r\n                    <div class="gq-input-group">\r\n                        <label class="gq-label">MOJA SITUÁCIA A PREFERENCIE</label>\r\n                        <textarea class="gq-input" id="gqNotesInput" placeholder="Napíš o sebe a hlavne kedy ti vyhovuje trénovať (ráno/večer, cez týždeň/víkend). Pomôž nám lepšie pochopiť tvoju situáciu..."></textarea>\r\n                    </div>\r\n\r\n                    <button class="gq-btn-cta" id="gqSubmitBtn">Zistiť dostupnosť</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- Progress Bar --\x3e\r\n        <div class="gq-progress-container" id="gqProgressBar">\r\n            <div class="gq-progress-inner">\r\n                <div class="gq-progress-line-bg"></div>\r\n                <div class="gq-progress-line-fill" id="gqProgressFill"></div>\r\n                \r\n                <div class="gq-bead active" id="bead1"></div>\r\n                <div class="gq-bead" id="bead2"></div>\r\n                <div class="gq-bead" id="bead3"></div>\r\n                <div class="gq-bead" id="bead4"></div>\r\n                <div class="gq-bead" id="bead5"></div>\r\n                <div class="gq-bead" id="bead6"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\n        ',this.init(),this.injectTriggers()}injectTriggerStyles(){if(document.getElementById("gq-trigger-styles"))return;const n=`\n            /* PULSING ANIMATION */\n            @keyframes gq-pulse {\n                0%, 100% {\n                    transform: scale(1);\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.2), 0 0 0 0 rgba(238, 9, 40, 0.7);\n                }\n                50% {\n                    transform: scale(1.05);\n                    box-shadow: 0 4px 16px rgba(0,0,0,0.3), 0 0 0 10px rgba(238, 9, 40, 0);\n                }\n            }\n\n            /* DESKTOP TRIGGER (Fixed Bottom Right) */\n            .gq-trigger-desktop {\n                position: fixed;\n                bottom: 100px;\n                right: 20px;\n                background-color: ${this.config.primaryColor};\n                color: white;\n                padding: 14px 32px;\n                border-radius: 50px;\n                cursor: pointer;\n                font-family: ${this.config.fontFamily};\n                font-weight: 700;\n                font-size: 15px;\n                z-index: 9999;\n                border: none;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n                transition: transform 0.2s, background-color 0.2s;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                white-space: nowrap;\n                animation: gq-pulse 2.5s ease-in-out infinite;\n            }\n            .gq-trigger-desktop:hover {\n                transform: scale(1.08);\n                background-color: #c40510;\n                animation: none;\n            }\n            @media (max-width: 991px) {\n                .gq-trigger-desktop { display: none !important; }\n            }\n\n            /* MOBILE TRIGGER (Fixed Bottom - Same as Desktop) */\n            .gq-trigger-mobile {\n                position: fixed;\n                bottom: 120px;\n                left: 50%;\n                transform: translateX(-50%);\n                background-color: ${this.config.primaryColor};\n                color: white;\n                border: none;\n                padding: 12px 20px;\n                border-radius: 50px;\n                font-family: ${this.config.fontFamily};\n                font-weight: 700;\n                font-size: 13px;\n                cursor: pointer;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n                z-index: 9998;\n                text-align: center;\n                line-height: 1.3;\n                white-space: pre-line;\n                max-width: calc(100% - 40px);\n                animation: gq-pulse 2.5s ease-in-out infinite;\n            }\n            .gq-trigger-mobile:hover {\n                animation: none;\n            }\n            @media (min-width: 992px) {\n                .gq-trigger-mobile { display: none !important; }\n            }\n        `,t=document.createElement("style");t.id="gq-trigger-styles",t.textContent=n,document.head.appendChild(t)}init(){const n=this.shadowRoot;n.querySelectorAll(".gq-option").forEach(n=>{n.addEventListener("click",()=>{const t=n.dataset.action,e=n.dataset.value;this.handleSelection(t,e)})}),n.getElementById("gqBackBtn").addEventListener("click",()=>this.prevStep()),n.getElementById("gqCloseBtn").addEventListener("click",()=>this.closeQuiz()),n.getElementById("gqShowFormBtn").addEventListener("click",()=>this.nextStep(8)),n.getElementById("gqSubmitBtn").addEventListener("click",()=>this.submitForm());const t=n.getElementById("gqPhoneInput"),e=n.getElementById("gqSubmitBtn");t.addEventListener("input",()=>{const n=t.value;!this.state.buttonPulsed&&n.length>=10&&(this.state.buttonPulsed=!0,setTimeout(()=>{e.classList.add("entice")},500))})}injectTriggers(){if(!document.getElementById("gq-trigger-desktop")){const n=document.createElement("button");n.id="gq-trigger-desktop",n.className="gq-trigger-desktop",n.textContent=this.config.desktopText,n.onclick=()=>this.openQuiz(),document.body.appendChild(n)}if(!document.getElementById("gq-trigger-mobile")){const n=document.createElement("button");n.id="gq-trigger-mobile",n.className="gq-trigger-mobile",n.innerHTML="Správny tréner mení všetko<br><strong>VYBER SI HO HNEĎ</strong>",n.onclick=()=>this.openQuiz(),document.body.appendChild(n),console.log("GymStar Quiz: Mobile trigger injected (fixed bottom).")}}openQuiz(){const n=this.shadowRoot.getElementById("gq-overlay");requestAnimationFrame(()=>{n.classList.add("active"),this.state.currentStep=1,this.state.buttonPulsed=!1;this.shadowRoot.querySelectorAll(".gq-slide").forEach(n=>{n.classList.remove("active","exit-left","exit-right","enter-left"),"1"===n.dataset.step&&n.classList.add("active")}),this.updateUI(1)})}closeQuiz(){this.shadowRoot.getElementById("gq-overlay").classList.remove("active")}handleSelection(n,t){if(this.state.answers[n]=t,"gender"===n)this.selectGender(t);else if("readiness"===n)this.startLoading();else{const t={goal:3,experience:4,frequency:5,motivation:6};t[n]&&this.nextStep(t[n])}}selectGender(n){this.state.userGender=n,this.state.answers.gender="male"===n?"Muž":"Žena";const t=this.shadowRoot.getElementById("gqDynamicReadyText"),e=this.shadowRoot.querySelector(".gq-cellulitis-option");"female"===n?(t.innerText="Si pripravená",e.style.display="block"):(t.innerText="Si pripravený",e.style.display="none"),this.nextStep(2)}nextStep(n){if("number"!=typeof n)return;const t=this.shadowRoot.querySelector(`.gq-slide[data-step="${this.state.currentStep}"]`),e=this.shadowRoot.querySelector(`.gq-slide[data-step="${n}"]`);e&&(t&&(t.classList.remove("active","enter-left"),t.classList.add("exit-left")),e.classList.remove("exit-left","exit-right","enter-left"),e.offsetWidth,e.classList.add("active"),this.state.currentStep=n,this.updateUI(n))}prevStep(){if(this.state.currentStep<=1)return;let n=this.state.currentStep-1;8===this.state.currentStep&&(n=7);const t=this.shadowRoot.querySelector(`.gq-slide[data-step="${this.state.currentStep}"]`),e=this.shadowRoot.querySelector(`.gq-slide[data-step="${n}"]`);t&&e&&(t.classList.remove("active","enter-left","exit-left"),t.classList.add("exit-right"),e.classList.remove("active","exit-left","exit-right"),e.classList.add("enter-left"),e.offsetWidth,setTimeout(()=>{e.classList.remove("enter-left"),e.classList.add("active")},10),this.state.currentStep=n,this.updateUI(this.state.currentStep))}startLoading(){this.state.buttonPulsed=!1,this.shadowRoot.getElementById("gqSubmitBtn").classList.remove("entice");const n=this.shadowRoot.querySelector('.gq-slide[data-step="6"]');n.classList.remove("active"),n.classList.add("exit-left");const t=this.shadowRoot.getElementById("gqLoadingSlide");t.classList.remove("exit-left","exit-right"),t.offsetWidth,t.classList.add("active"),this.shadowRoot.getElementById("gqProgressBar").style.opacity="0",this.shadowRoot.getElementById("gqBackBtn").classList.remove("visible"),this.shadowRoot.getElementById("gqMainHeader").style.opacity="0",setTimeout(()=>{this.shadowRoot.getElementById("gqSpinner").style.display="none",this.shadowRoot.getElementById("gqCheckmark").classList.add("show"),this.shadowRoot.getElementById("gqLoadText").innerText="Hotovo!",setTimeout(()=>{t.classList.remove("active"),t.classList.add("exit-left"),this.nextStep(7)},1e3)},1500)}updateUI(n){const t=this.shadowRoot.getElementById("gqBackBtn"),e=this.shadowRoot.getElementById("gqProgressBar"),r=this.shadowRoot.getElementById("gqMainHeader");n>1&&n<7?t.classList.add("visible"):t.classList.remove("visible"),n>=7?(e.style.opacity="0",r.style.opacity="0",r.style.pointerEvents="none"):(e.style.opacity="1",r.style.opacity="1",r.style.pointerEvents="all",this.updateProgress(n))}updateProgress(n){if(n>this.state.totalQuestions)return;const t=this.shadowRoot.querySelector(".gq-progress-inner");if(!t)return;const e=t.offsetWidth-12,r=this.shadowRoot.getElementById("gqProgressFill"),i=e*(n-1)/(this.state.totalQuestions-1);r.style.width=`${i}px`;for(let o=1;o<=this.state.totalQuestions;o++){const t=this.shadowRoot.getElementById(`bead${o}`);t&&(t.className="gq-bead",o<n?t.classList.add("completed"):o===n&&t.classList.add("active"))}}submitForm(){const n=this.shadowRoot.getElementById("gqPhoneInput").value.trim(),t=this.shadowRoot.getElementById("gqNotesInput").value.trim();if(!n||n.length<9)return void alert("Prosím, zadajte platné telefónne číslo.");const e={phone:n,notes:t,trainer:"Andrea Kavuličová",answers:this.state.answers,timestamp:(new Date).toISOString()};console.log("Submitting:",e),fetch(this.config.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{console.log("Success:",n),alert("Ďakujeme! Čoskoro vás budeme kontaktovať."),this.closeQuiz()}).catch(n=>{console.error("Error:",n),alert("Ďakujeme! Čoskoro vás budeme kontaktovať."),this.closeQuiz()})}}customElements.define("gymstar-quiz",n)}();
